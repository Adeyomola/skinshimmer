<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QZD2DDJZRZ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-QZD2DDJZRZ');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Skincare, Hair, and More">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Nunito|Quicksand">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/getpost.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/buttons.css') }}">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7394667149835180"
        crossorigin="anonymous"></script>
    <title>{{ post_row['title'] }}</title>
</head>

<body>
    {% extends 'nav.html' %}
    {% block content %}
    <article>
        <div id="postimage">
            <img src="{{ post_row['image_url'] }}" alt="{{ post_row['title'] | safe }}">
            {{ post_row [image_credit] }}
        </div>
        <div id="author-name" style="display: flex; flex-direction: column; padding: 0.5rem;">
            {% if author_image %}
            <img src="{{ author_image }}" height="35" width="35" style="border-radius: 50%;">
            {% endif %}
            <p>Written By <strong><a href="/author/{{ post_row['firstname'] }}" style="color: #509056">{{
                        post_row['firstname'] }}</a></strong>
            </p>
        </div>
        <div id="article-title-2"> {{ post_row['title'] | safe }} </div>
        <div id="body-1"> {{ post_row['body'] | safe }} </div>
    </article>
    {% if session['user_id'] == post_row['author_id'] %}
    <div id="edit-delete-wrapper">
        <a id="edit-anchor" href="{{ url_for ('blog.update_post', post_title=post_row['title']) }}">
            <button id="edit-delete" type="submit" value="Edit">Edit</button></a>
        <form id="delete-form" action="{{ url_for ('blog.delete_post', post_title=post_row['title']) }}" method="post">
            <button id="edit-delete" type="submit" onclick="return confirm ('Are you sure?')"
                value="Delete">Delete</button>
        </form>
    </div>
    {% elif session['user_id'] == 1 %}
    <div id="edit-delete-wrapper">
        <form id="delete-form" action="{{ url_for ('blog.delete_post', post_title=post_row['title']) }}" method="post">
            <button id="edit-delete" type="submit" onclick="return confirm ('Are you sure?')"
                value="Delete">Delete</button>
        </form>
    </div>
    {% elif not session['user_id'] %}
    <form action="" method="post" style="display: flex; flex-direction: column; align-items: center;">
        <textarea name="name" id="name" style="resize: none; padding: 0.2rem; font-family: Montserrat;"
            placeholder="Name" required></textarea>
        <textarea name="comment" id="commentinput"
            style="height: 20vh; resize: none; padding: 0.2rem; font-family: Montserrat; margin: 1rem;"
            placeholder="Please leave a comment"></textarea>
        <button type="submit">Submit Comment</button>
    </form>
    {% endif %}
    {% if not session['user_id'] %}
    <section style="display: flex; flex-direction: column; align-items: center;">
        {% if comments %}
        <p style="font: 1rem Cabin; font-weight: 600; text-decoration: underline;">Comments</p>
        {% endif %}
        {% for comment in comments %}
        <summary id="comment" style="margin: 0.5rem;">
            <p style="font: 0.9rem Cabin; font-weight: 600;">{{ comment['name'] }}:</p>
            <p style="font: 0.8rem Montserrat;">{{ comment['comment'] }}</p>
        </summary>
        {% endfor %}
    </section>
    {% endif %}
    {% endblock %}
</body>

</html>